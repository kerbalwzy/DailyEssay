## Django框架必知必会

#### 01-使用Django框架创建项目和子应用的基本步骤和项目初始文件的作用

```
创建项目的步骤:
	1.安装Django的包「pip install django」
	2.通过django-admin命令创建项目文件夹「django-admin startproject ProjectDirName」
	3.切换到项目文件夹内「cd ProjectDirName」
	4.通过django-admin命令创建应用文件夹「django-admin startapp AppDirName」

项目初始文件的作用:
	manager.py	项目管理文件,在开发模式下可以通过它启动项目
	项目同名目录下的:
		settings.py	 是项目的整体配置文件。
		urls.py 	 是项目的URL配置文件。
		wsgi.py 	 是项目与WSGI兼容的Web服务器入口。
```

---

#### 02-MVC和Django的MVT

```
MVC「Model-View-Controller」是一种设计模式,其核心思想是分工、解耦，让不同的代码块之间降低耦合，增强代码的可扩展性和可移植性，实现向后兼容。

    M全拼为Model，主要封装对数据库层的访问，对数据库中的数据进行增、删、改、查操作。
    V全拼为View，用于封装结果，生成页面展示的html内容。
    C全拼为Controller，用于接收请求，处理业务逻辑，与Model和View交互，返回结果。

Django的MVT:
	M全拼为Model，与MVC中的M功能相同，负责和数据库交互，进行数据处理。
	V全拼为View，与MVC中的C功能相同，接收请求，进行业务处理，返回应答。
	T全拼为Template，与MVC中的V功能相同，负责封装构造要返回的html。
```

----

#### 03-请求「Request」相关的知识

- ##### 利用HTTP协议向服务器传参的几种途径

  ```
  1,提取URL的特定部分，如/weather/beijing/2018，可以在服务器端的路由中用正则表达式截取；
  2,查询字符串（query string)，形如key1=value1&key2=value2；
  3,请求体（body）中发送的数据，比如表单数据、json、xml；
  4,在http报文的头（header）中。		
  ```

- ##### Django中的QueryDict对象

  ```
  HttpRequest对象的属性GET、POST都是QueryDict类型的对象
      GET属性用来获取查询字符串参数
      POST属性用来获取表单类型的请求体数据
  与python字典不同，QueryDict类型的对象用来处理同一个键带有多个值的情况
  
  方法get()：根据键获取值
  	如果一个键同时拥有多个值将获取最后一个值
  	如果键不存在则返回None值，可以设置默认值进行后续处理
  
  方法getlist()：根据键获取值，值以列表返回，
  	可以获取指定键的所有值
  	如果键不存在则返回空列表[]，可以设置默认值进行后续处理
  ```

- ##### Django中非表单类型的数据如何获取

  ```
  非表单类型的请求体数据，Django无法自动解析，可以通过request.body属性获取最原始的请求体数据，自己按照请求体格式（JSON、XML等）进行解析。request.body返回bytes类型。
  ```

- ##### 其他常用HttpRequest对象属性

  ```
  META: 		获取请求头headers中的数据，request.META为字典类型。
  method：	   一个字符串，表示请求使用的HTTP方法，常用值包括：'GET'、'POST'。
  user： 	   请求的用户对象。
  path：  	   一个字符串，表示请求的页面的完整路径，不包含域名和参数部分。
  encoding：  一个字符串，表示提交的数据的编码方式。
  FILES：	   一个类似于字典的对象，包含所有的上传文件。
  ```

----

#### 04-响应「Response」相关的知识

- ##### 通过HTTPResponse类构建响应体对象时的主要三个初始化参数的含义

  ```
  content：表示返回的内容。
  status_code：返回的HTTP响应状态码。
  content_type：指定返回数据的的MIME类型。
  ```

- ##### 响应头可以直接将HttpResponse对象当做字典进行响应头键值对的设置

- ##### 如果要返回JSON格式的数据,可以使用JsonResponse类来创建响应对像,主要自动实现了以下两个功能

  ```
  帮助我们将dict数据转换为json字符串
  设置响应头Content-Type为 application/json
  ```

---

#### 05-Django中的状态保持「设置与获取」

- ##### Cookie信息的设置与获取

  ```
  可以通过HttpResponse对象中的set_cookie方法来设置cookie。
  可以通过HttpRequest对象的COOKIES属性来读取本次请求携带的cookie值。request.COOKIES为字典类型。
  ```

- ##### Session信息的设置与获取

  - 通过HttpRequest对象的session属性进行会话的读写操作。

----

#### 06-函数视图与类视图

- ##### 函数视图

  ````
  以函数的方式定义的视图称为函数视图，函数视图便于理解。但是遇到一个视图对应的路径提供了多种不同HTTP请求方式的支持时，便需要在一个函数中编写不同的业务逻辑，代码可读性与复用性都不佳。
  ````

- ##### 类视图

  ```
  在Django中也可以使用类来定义一个视图，称为类视图。类视图的基类是Django框架中View类
  使用类视图可以将视图对应的不同 请求方式 以类中的不同方法来区别定义。
  
  类视图的好处：
  	代码可读性好
  	类视图相对于函数视图有更高的复用性， 如果其他地方需要用到某个类视图的某个特定逻辑，直接继承该类视图即可.
  ```

----

#### 07-中间件

- ##### Django中间件的作用

  ```
  Django中的中间件是一个轻量级、底层的插件系统，可以介入Django的请求和响应处理过程，修改Django的输入或输出。中间件的设计为开发者提供了一种无侵入式的开发方式，增强了Django框架的健壮性。
  我们可以使用中间件，在Django处理视图的不同阶段对输入或输出进行干预。
  ```

- ##### 中间件的定义方法

  ```
  定义一个中间件工厂函数，然后返回一个可以别调用的中间件。
  中间件工厂函数需要接收一个可以调用的get_response对象。
  返回的中间件也是一个可以被调用的对象，并且像视图一样需要接收一个request对象参数，返回一个response对象。
  ```

- ##### 多个中间件的执行顺序

  ```
  在请求视图被处理前，中间件由上至下依次执行
  在请求视图被处理后，中间件由下至上依次执行
  ```

---

#### 08-Django中的内置ORM

- ##### ORM模块的作用

  ```
  O是object，也就类对象的意思，
  R是relation，翻译成中文是关系，也就是关系数据库中数据表的意思，
  M是mapping，是映射的意思。
  
  作用:
  	1.帮我们把类和数据表进行了一个映射，可以让我们通过类和类对象就能操作它所对应的表格中的数据。
  	2.可以根据我们设计的类自动帮我们生成数据库中的表格，省去了我们自己建表的过程。
  ```

- ##### 查询集QuerySet

  ```
  概念:	查询集，也称查询结果集、QuerySet，表示从数据库中获取的对象集合。
  两大特性:
  	1.惰性执行:	创建查询集不会访问数据库，直到调用数据时，才会访问数据库，调用数据的情况包括迭代、序列化、与if合用
  	2.缓存: 使用同一个查询集，第一次使用时会发生数据库的查询，然后Django会把结果缓存下来，再次使用这个查询集时会使用缓存的数据，减少了数据库的查询次数。
  ```




